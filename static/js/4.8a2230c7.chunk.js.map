{"version":3,"sources":["../node_modules/@material-ui/icons/ThumbUp.js","components/Comments/CommentStyle.ts","components/Comments/Comment.tsx"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_react","_default","createElement","d","CommentContainer","styled","section","theme","colors","commentGradient","CommentDetails","article","opositeColorLowAlpha","User","div","UserAvatar","img","attrs","alt","CommentText","p","secondary","MoreInfo","Likes","span","PublishInfo","fontSizes","small","Comment","videoId","useSelector","state","searchResult","comments","items","isLoading","nextPageToken","dispatch","useDispatch","scrollHandler","windowHeight","window","innerHeight","bodyHeight","document","body","offsetHeight","scroll","scrollY","OFFSET_TO_LOAD_COMMENT","allActions","searchResultsActions","fetchComments","useEffect","addEventListener","passive","removeEventListener","flat","map","item","length","comment","snippet","topLevelComment","key","id","src","authorProfileImageUrl","authorDisplayName","textOriginal","likeCount","publishedAt","Loader"],"mappings":"yGAEA,IAAIA,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQE,aAAU,EAElB,IAAIC,EAASP,EAAuBC,EAAQ,IAIxCO,GAAW,EAFMR,EAAuBC,EAAQ,KAElBK,SAASC,EAAOD,QAAQG,cAAc,OAAQ,CAC9EC,EAAG,4MACD,WAEJN,EAAQE,QAAUE,G,8qCCfX,IAAMG,EAAmBC,IAAOC,QAAV,KAEP,qBAAGC,MAAkBC,OAAOC,mBASrCC,EAAiBL,IAAOM,QAAV,KACD,qBAAGJ,MAAkBC,OAAOI,wBAMzCC,EAAOR,IAAOS,IAAV,KAKJC,EAAaV,IAAOW,IAAIC,MAAM,CAAEC,IAAK,UAAxBb,CAAH,KAKVc,EAAcd,IAAOe,EAAV,KACF,qBAAGb,MAAkBC,OAAOa,aAKrCC,EAAWjB,IAAOS,IAAV,KAMRS,EAAQlB,IAAOmB,KAAV,KAKLC,EAAcpB,IAAOmB,KAAV,KACT,qBAAGjB,MAAkBmB,UAAUC,S,wBCyC/BC,UArEf,YAAoC,IAAjBC,EAAgB,EAAhBA,QAAgB,EACSC,aACxC,SAACC,GAAD,OAAsBA,EAAMC,aAAaC,YADrCC,EAD2B,EAC3BA,MAAOC,EADoB,EACpBA,UAAWC,EADS,EACTA,cAGlBC,EAAWC,cAYXC,EAAgB,WACpB,IAAMC,EAAuBC,OAAOC,YAC9BC,EAAqBC,SAASC,KAAKC,aACnCC,EAAiBN,OAAOO,QAG5BL,EAAaM,KAA0BF,EAASP,GAChDJ,IAhBGD,GACHE,EACEa,IAAWC,qBAAqBC,cAAc,CAC5CvB,UACAO,qBAiBRiB,qBAAU,WAER,OADAZ,OAAOa,iBAAiB,SAAUf,EAAe,CAAEgB,SAAS,IACrD,kBAAMd,OAAOe,oBAAoB,SAAUjB,MACjD,CAACL,IAEJmB,qBAAU,WACRhB,EAASa,IAAWC,qBAAqBC,cAAc,CAAEvB,eACxD,CAACA,EAASQ,IAEb,IAAMJ,EAAWC,EACduB,KAAK,GACLC,KAAI,SAACC,GAAD,OAAUA,EAAKzB,SACnBuB,KAAK,GAER,OACE,kBAACrD,EAAD,KACG6B,EAAS2B,QACR3B,EAASyB,KAAI,SAACG,GAAa,IACjBC,EAAYD,EAAQC,QAAQC,gBAA5BD,QACR,OACE,kBAACpD,EAAD,CAAgBsD,IAAKH,EAAQI,IAC3B,kBAACpD,EAAD,KACE,kBAACE,EAAD,CAAYmD,IAAKJ,EAAQK,wBACzB,gCAASL,EAAQM,oBAEnB,kBAACjD,EAAD,KAAc2C,EAAQO,cACtB,kBAAC/C,EAAD,KACE,kBAACC,EAAD,KACE,kBAAC,IAAD,MACCuC,EAAQQ,WAEX,kBAAC7C,EAAD,KAAcqC,EAAQS,mBAK9BpC,IAAcF,EAAS2B,SAAW,kBAACY,EAAA,EAAD","file":"static/js/4.8a2230c7.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z\"\n}), 'ThumbUp');\n\nexports.default = _default;","import styled from \"styled-components\";\r\n\r\nexport const CommentContainer = styled.section`\r\n  grid-column: 1/2;\r\n  background-image: ${({ theme }) => theme.colors.commentGradient};\r\n  margin: 10px;\r\n  border-radius: 10px;\r\n\r\n  @media only screen and (max-width: 610px) {\r\n    grid-row: 3/4;\r\n  }\r\n`;\r\n\r\nexport const CommentDetails = styled.article`\r\n  border-top: 1px solid ${({ theme }) => theme.colors.opositeColorLowAlpha};\r\n  padding: 5px;\r\n  margin-bottom: 5px;\r\n  margin-left: 5px;\r\n`;\r\n\r\nexport const User = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nexport const UserAvatar = styled.img.attrs({ alt: \"Avatar\" })`\r\n  border-radius: 50%;\r\n  margin: 5px;\r\n`;\r\n\r\nexport const CommentText = styled.p`\r\n  background-color: ${({ theme }) => theme.colors.secondary};\r\n  border-radius: 10px;\r\n  padding: 5px;\r\n`;\r\n\r\nexport const MoreInfo = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n`;\r\n\r\nexport const Likes = styled.span`\r\n  margin-right: 20px;\r\n  color: green;\r\n`;\r\n\r\nexport const PublishInfo = styled.span`\r\n  font-size: ${({ theme }) => theme.fontSizes.small};\r\n`;\r\n","import React, { useEffect } from \"react\";\r\nimport Loader from \"../Loader/Loader\";\r\nimport ThumbUpIcon from \"@material-ui/icons/ThumbUp\";\r\nimport {\r\n  CommentContainer,\r\n  CommentDetails,\r\n  User,\r\n  UserAvatar,\r\n  CommentText,\r\n  MoreInfo,\r\n  Likes,\r\n  PublishInfo,\r\n} from \"./CommentStyle\";\r\n\r\nimport allActions from \"../../duck/allActions\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"../../duck/allReducers\";\r\nimport { Iid } from \"../../duck/types/searchResultTypes\";\r\nimport { OFFSET_TO_LOAD_COMMENT } from \"../../config/searchOptions\";\r\n\r\nfunction Comment({ videoId }: Iid) {\r\n  let { items, isLoading, nextPageToken } = useSelector(\r\n    (state: RootState) => state.searchResult.comments\r\n  );\r\n  const dispatch = useDispatch();\r\n\r\n  const loadMoreComments = () => {\r\n    if (!isLoading)\r\n      dispatch(\r\n        allActions.searchResultsActions.fetchComments({\r\n          videoId,\r\n          nextPageToken,\r\n        })\r\n      );\r\n  };\r\n\r\n  const scrollHandler = () => {\r\n    const windowHeight: number = window.innerHeight;\r\n    const bodyHeight: number = document.body.offsetHeight;\r\n    const scroll: number = window.scrollY;\r\n\r\n    if (\r\n      bodyHeight - OFFSET_TO_LOAD_COMMENT <= scroll + windowHeight &&\r\n      nextPageToken\r\n    )\r\n      loadMoreComments();\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"scroll\", scrollHandler, { passive: true });\r\n    return () => window.removeEventListener(\"scroll\", scrollHandler);\r\n  }, [items]);\r\n\r\n  useEffect(() => {\r\n    dispatch(allActions.searchResultsActions.fetchComments({ videoId }));\r\n  }, [videoId, dispatch]);\r\n\r\n  const comments = items\r\n    .flat(1)\r\n    .map((item) => item.items)\r\n    .flat(1);\r\n\r\n  return (\r\n    <CommentContainer>\r\n      {comments.length &&\r\n        comments.map((comment) => {\r\n          const { snippet } = comment.snippet.topLevelComment;\r\n          return (\r\n            <CommentDetails key={comment.id}>\r\n              <User>\r\n                <UserAvatar src={snippet.authorProfileImageUrl} />\r\n                <strong>{snippet.authorDisplayName}</strong>\r\n              </User>\r\n              <CommentText>{snippet.textOriginal}</CommentText>\r\n              <MoreInfo>\r\n                <Likes>\r\n                  <ThumbUpIcon />\r\n                  {snippet.likeCount}\r\n                </Likes>\r\n                <PublishInfo>{snippet.publishedAt}</PublishInfo>\r\n              </MoreInfo>\r\n            </CommentDetails>\r\n          );\r\n        })}\r\n      {(isLoading || !comments.length) && <Loader />}\r\n    </CommentContainer>\r\n  );\r\n}\r\n\r\nexport default Comment;\r\n"],"sourceRoot":""}